<!--
 This file is part of the Mg kdb+/Krb5 Library (hereinafter "The Library").

 The Library is free software: you can redistribute it and/or modify it under
 the terms of the GNU Affero Public License as published by the Free Software
 Foundation, either version 3 of the License, or (at your option) any later
 version.

 The Library is distributed in the hope that it will be useful, but WITHOUT ANY
 WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 PARTICULAR PURPOSE. See the GNU Affero Public License for more details.

 You should have received a copy of the GNU Affero Public License along with The
 Library. If not, see https://www.gnu.org/licenses/agpl.txt.
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Kerberos test</title>
    <meta charset="utf-8" />
    <script type="module">

import { MgKdb } from '/ipc.js'

window.MgKrb5 = {}

class Receiver {

  kdbConnected = conn => {
    console.log("Connected")
  }

  kdbDisconnected = conn => {
    console.log("Disconnected")
  }
}

MgKrb5.receiver = new Receiver()

window.mg_init = function() {
  const listener = {
    onConnected: MgKrb5.receiver.kdbConnected,
    onDisconnected: MgKrb5.receiver.kdbDisconnected,
  }
  MgKrb5.conn = new MgKdb.Endpoint(`ws://${window.location.host}`, listener)
}

    </script>
  </head>
  <body onload="mg_init()">
    <div id="mg_root"></div>
  </body>
</html>
